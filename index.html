<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>PRISM - See The Full Spectrum</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
    body { background: #f8fafc; }
    .phone-frame { 
      max-width: 390px; 
      margin: 0 auto;
      min-height: 100vh;
      background: white;
      position: relative;
      overflow-x: hidden;
    }
    .hide-scrollbar::-webkit-scrollbar { display: none; }
    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
    .animate-fadeIn { animation: fadeIn 0.4s ease-out; }
    .animate-pulse-slow { animation: pulse 2s infinite; }
    .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
  </style>
</head>
<body>
  <div id="app" class="phone-frame"></div>

  <script>
    // Demo Data
    const demoData = {
      event: {
        title: "UnitedHealthcare CEO Brian Thompson Shooting",
        summary: "Brian Thompson, 50-year-old CEO of UnitedHealthcare, was shot and killed on December 4, 2024, outside the New York Hilton Midtown hotel. The suspect, Luigi Mangione (26), was arrested five days later.",
        status: "ongoing",
        categories: ["Crime", "Healthcare", "Corporate America"],
        stats: { sources: 47, factChecks: 8, bookmarks: 12847 }
      },
      chapters: [
        {
          id: "ch1", title: "The Shooting", date: "Dec 4, 2024", status: "resolved",
          events: [
            { title: "Initial Incident", time: "6:45 AM", summary: "Thompson shot twice outside New York Hilton Midtown." },
            { title: "Corporate Response", time: "8:00 AM", summary: "UnitedHealth cancels investor conference." },
            { title: "NYPD Press Conference", time: "12:00 PM", summary: "Commissioner announces 'premeditated attack'." }
          ]
        },
        {
          id: "ch2", title: "The Manhunt", date: "Dec 5-8, 2024", status: "resolved",
          events: [
            { title: "Suspect Images Released", time: "Dec 5", summary: "NYPD releases surveillance images." },
            { title: "FBI Joins Investigation", time: "Dec 6", summary: "Reward increased to $60,000." }
          ]
        },
        {
          id: "ch3", title: "The Arrest", date: "Dec 9, 2024", status: "resolved",
          events: [
            { title: "Mangione Arrested", time: "9:14 AM", summary: "Arrested at McDonald's in Altoona, PA." },
            { title: "Background Revealed", time: "3:00 PM", summary: "Ivy League grad, wealthy family." }
          ]
        },
        {
          id: "ch4", title: "Public Debate", date: "Dec 10+", status: "ongoing",
          events: [
            { title: "Polarized Reaction", time: "Ongoing", summary: "#FreeLuigi trends. 53% view as 'villain'." },
            { title: "Healthcare Debate", time: "Ongoing", summary: "National conversation on insurance denials." }
          ]
        }
      ],
      sources: {
        progressive: [
          { name: "The Nation", lean: -9, credibility: 78, framing: "Systemic healthcare failures" },
          { name: "MSNBC", lean: -8, credibility: 72, framing: "Criticizes hero worship" },
          { name: "The Atlantic", lean: -7, credibility: 88, framing: "Expression of righteous anger" }
        ],
        centrist: [
          { name: "Reuters", lean: 0, credibility: 95, framing: "Wire service facts" },
          { name: "Associated Press", lean: 0, credibility: 95, framing: "Breaking news" },
          { name: "BBC", lean: -1, credibility: 93, framing: "International perspective" }
        ],
        conservative: [
          { name: "Fox News", lean: 8, credibility: 68, framing: "Condemns violence" },
          { name: "City Journal", lean: 7, credibility: 75, framing: "Broken moral compass" },
          { name: "National Review", lean: 8, credibility: 76, framing: "Rule of law emphasis" }
        ]
      },
      factChecks: [
        { claim: "UHC denies 32% of all claims", verdict: "MOSTLY TRUE", color: "#D69E2E", explanation: "Figure is for ACA marketplace plans only." },
        { claim: "Shell casings had 'deny, defend, depose'", verdict: "PARTIALLY FALSE", color: "#C53030", explanation: "Correct words: 'delay, deny, depose'" },
        { claim: "Mangione was denied care by UHC", verdict: "LIKELY FALSE", color: "#C53030", explanation: "No evidence of personal claim denials." },
        { claim: "Majority support Mangione", verdict: "FALSE", color: "#C53030", explanation: "Polls show 43-61% view him negatively." }
      ],
      userProfile: {
        name: "Alex Chen",
        level: 43,
        diversityScore: 67,
        factChecks: 320,
        badges: [
          { name: "Fact-Check Champion", icon: "‚úì" },
          { name: "Balanced Thinker", icon: "üèÜ" }
        ],
        politicalBalance: { progressive: 58, conservative: 42 }
      },
      bookmarkedEvents: [
        { id: 1, title: "UnitedHealthcare CEO Shooting", category: "Healthcare", bookmarked: true },
        { id: 2, title: "Russia Ukraine War: Timeline", category: "Warfare", bookmarked: true },
        { id: 3, title: "Debate on US Abortion Rights", category: "Public Policy", bookmarked: true },
        { id: 4, title: "Is AI a Bubble or Not?", category: "Technology", bookmarked: true },
        { id: 5, title: "EU's Defence Spending", category: "EU", bookmarked: false }
      ]
    };

    // App State
    let currentScreen = 'splash';
    let activeTab = 'home';
    let expandedChapter = 'ch1';
    let eventDetailView = 'overview';

    // Icons as SVG strings
    const icons = {
      home: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9,22 9,12 15,12 15,22"/></svg>`,
      globe: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/></svg>`,
      bookmark: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/></svg>`,
      bookmarkFilled: `<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2"><path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/></svg>`,
      user: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>`,
      chevronRight: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9,18 15,12 9,6"/></svg>`,
      chevronDown: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6,9 12,15 18,9"/></svg>`,
      chevronUp: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="18,15 12,9 6,15"/></svg>`,
      arrowLeft: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12,19 5,12 12,5"/></svg>`,
      check: `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20,6 9,17 4,12"/></svg>`,
      clock: `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12,6 12,12 16,14"/></svg>`,
      shield: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>`,
      trending: `<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.3"><polyline points="23,6 13.5,15.5 8.5,10.5 1,18"/><polyline points="17,6 23,6 23,12"/></svg>`
    };

    // Prism Logo
    const prismLogo = `
      <svg width="60" height="60" viewBox="0 0 100 100" fill="none">
        <defs>
          <linearGradient id="prismGrad" x1="0%" y1="100%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#EC4899"/>
            <stop offset="50%" stop-color="#8B5CF6"/>
            <stop offset="100%" stop-color="#06B6D4"/>
          </linearGradient>
        </defs>
        <path d="M50 10 L90 80 L10 80 Z" fill="url(#prismGrad)" opacity="0.9"/>
        <path d="M50 25 L75 70 L25 70 Z" fill="white" opacity="0.3"/>
      </svg>
    `;

    // Render Functions
    function renderSplash() {
      return `
        <div class="fixed inset-0 flex flex-col items-center justify-center" style="background: linear-gradient(180deg, #1e293b 0%, #312e81 50%, #4c1d95 100%);">
          <div class="animate-pulse-slow">
            <div class="flex items-center gap-3 mb-4">
              ${prismLogo}
              <span class="text-4xl font-bold text-white tracking-tight">PRISM</span>
            </div>
            <p class="text-center text-slate-300 text-lg tracking-wide">See The Full Spectrum</p>
          </div>
          <div class="absolute bottom-20 flex gap-2">
            <div class="w-2 h-2 bg-white/50 rounded-full" style="animation: bounce 1s infinite;"></div>
            <div class="w-2 h-2 bg-white/50 rounded-full" style="animation: bounce 1s infinite 0.15s;"></div>
            <div class="w-2 h-2 bg-white/50 rounded-full" style="animation: bounce 1s infinite 0.3s;"></div>
          </div>
        </div>
      `;
    }

    function renderBottomNav() {
      const tabs = [
        { id: 'home', icon: icons.home, label: 'Home' },
        { id: 'explore', icon: icons.globe, label: 'Explore' },
        { id: 'bookmark', icon: icons.bookmark, label: 'Bookmark' },
        { id: 'profile', icon: icons.user, label: 'Profile' }
      ];

      return `
        <div class="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-lg border-t border-slate-200 px-4 py-2 z-50" style="max-width: 390px; margin: 0 auto;">
          <div class="flex justify-around items-center">
            ${tabs.map(tab => `
              <button onclick="switchTab('${tab.id}')" 
                      class="flex flex-col items-center py-2 px-4 rounded-xl transition-all ${activeTab === tab.id ? 'bg-slate-800 text-white' : 'text-slate-500 hover:text-slate-700'}">
                ${tab.icon}
                <span class="text-xs mt-1">${tab.label}</span>
              </button>
            `).join('')}
          </div>
        </div>
      `;
    }

    function renderHome() {
      const today = new Date().toLocaleDateString('en-US', { weekday: 'short', day: 'numeric', month: 'long', year: 'numeric' });
      
      return `
        <div class="pb-24 animate-fadeIn">
          <!-- Header -->
          <div class="px-5 pt-6 pb-4 bg-slate-50">
            <p class="text-slate-600">Good Morning,</p>
            <p class="text-xl font-semibold text-slate-800">Seeples</p>
            <p class="text-slate-500 text-sm">${today}</p>
          </div>

          <!-- Trending Now -->
          <div class="bg-gradient-to-b from-slate-700 to-slate-800 px-5 py-5">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-white text-lg font-semibold">Trending Now...</h2>
              <button class="text-violet-400 text-sm">See More</button>
            </div>
            <div class="flex gap-3 overflow-x-auto pb-2 hide-scrollbar">
              <div onclick="showEventDetail()" class="flex-shrink-0 w-44 bg-slate-600/50 rounded-xl overflow-hidden cursor-pointer hover:scale-105 transition-transform">
                <div class="h-28 bg-gradient-to-br from-red-500/30 to-slate-700 flex items-center justify-center">
                  ${icons.trending}
                </div>
                <div class="p-3">
                  <h3 class="text-white text-sm font-medium line-clamp-2">UHC CEO Shooting</h3>
                  <p class="text-violet-400 text-xs mt-1">Healthcare</p>
                </div>
              </div>
              <div class="flex-shrink-0 w-44 bg-slate-600/50 rounded-xl overflow-hidden cursor-pointer hover:scale-105 transition-transform">
                <div class="h-28 bg-gradient-to-br from-blue-500/30 to-slate-700 flex items-center justify-center">
                  ${icons.trending}
                </div>
                <div class="p-3">
                  <h3 class="text-white text-sm font-medium line-clamp-2">AI Regulation Debate</h3>
                  <p class="text-violet-400 text-xs mt-1">Technology</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Featured Event -->
          <div class="px-5 py-5">
            <h2 class="text-slate-800 text-lg font-semibold mb-4">Featured Event</h2>
            <div onclick="showEventDetail()" class="bg-gradient-to-br from-violet-600 to-indigo-700 rounded-2xl p-5 cursor-pointer hover:shadow-xl transition-all">
              <span class="inline-block px-2 py-1 bg-white/20 rounded text-white text-xs mb-2">ONGOING</span>
              <h3 class="text-white text-lg font-semibold mb-2">${demoData.event.title}</h3>
              <p class="text-white/80 text-sm line-clamp-2">${demoData.event.summary}</p>
              <div class="flex gap-4 mt-4 pt-4 border-t border-white/20">
                <div class="text-center">
                  <p class="text-white text-lg font-bold">${demoData.event.stats.sources}</p>
                  <p class="text-white/60 text-xs">Sources</p>
                </div>
                <div class="text-center">
                  <p class="text-white text-lg font-bold">${demoData.event.stats.factChecks}</p>
                  <p class="text-white/60 text-xs">Fact-Checks</p>
                </div>
                <div class="text-center">
                  <p class="text-white text-lg font-bold">4</p>
                  <p class="text-white/60 text-xs">Chapters</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Discover -->
          <div class="px-5 py-3">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-slate-800 text-lg font-semibold">Discover...</h2>
              <button class="text-violet-600 text-sm">See More</button>
            </div>
            <div class="space-y-3">
              ${['Climate Policy Debate', 'Tech Regulation News'].map(title => `
                <div class="flex items-center gap-3 p-3 bg-slate-50 rounded-xl cursor-pointer hover:bg-slate-100 transition-all">
                  <div class="w-16 h-16 bg-gradient-to-br from-violet-400 to-indigo-500 rounded-lg flex items-center justify-center">
                    ${icons.globe}
                  </div>
                  <div class="flex-1">
                    <h4 class="text-slate-800 font-medium">${title}</h4>
                    <p class="text-slate-500 text-sm">12 sources</p>
                  </div>
                  ${icons.chevronRight}
                </div>
              `).join('')}
            </div>
          </div>
        </div>
        ${renderBottomNav()}
      `;
    }

    function renderEventDetail() {
      const views = ['overview', 'spectrum', 'timeline', 'factcheck'];
      
      return `
        <div class="pb-24 animate-fadeIn">
          <!-- Header -->
          <div class="sticky top-0 bg-white/95 backdrop-blur-lg z-40 px-4 py-3 border-b border-slate-200">
            <div class="flex items-center gap-3">
              <button onclick="goBack()" class="p-2 hover:bg-slate-100 rounded-full">${icons.arrowLeft}</button>
              <div class="flex-1">
                <h1 class="text-lg font-semibold text-slate-800">UHC CEO Shooting</h1>
                <p class="text-xs text-slate-500">${demoData.event.stats.sources} sources ‚Ä¢ ${demoData.event.stats.factChecks} fact-checks</p>
              </div>
              <button class="p-2 hover:bg-slate-100 rounded-full text-violet-600">${icons.bookmarkFilled}</button>
            </div>
          </div>

          <!-- View Tabs -->
          <div class="flex gap-2 px-4 py-3 overflow-x-auto bg-slate-50 hide-scrollbar">
            ${views.map(view => `
              <button onclick="setEventView('${view}')" 
                      class="px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${eventDetailView === view ? 'bg-violet-600 text-white' : 'bg-white text-slate-600 hover:bg-slate-100'}">
                ${view === 'overview' ? 'Overview' : view === 'spectrum' ? 'Source Spectrum' : view === 'timeline' ? 'Timeline' : 'Fact-Checks'}
              </button>
            `).join('')}
          </div>

          <!-- Content -->
          ${eventDetailView === 'overview' ? renderOverview() : ''}
          ${eventDetailView === 'spectrum' ? renderSpectrum() : ''}
          ${eventDetailView === 'timeline' ? renderTimeline() : ''}
          ${eventDetailView === 'factcheck' ? renderFactCheck() : ''}
        </div>
        ${renderBottomNav()}
      `;
    }

    function renderOverview() {
      return `
        <div class="px-4 py-4">
          <div class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-5 mb-4">
            <span class="inline-block px-2 py-1 bg-amber-500/20 text-amber-400 rounded text-xs font-medium mb-3">ONGOING</span>
            <h2 class="text-white text-xl font-semibold mb-3">${demoData.event.title}</h2>
            <p class="text-slate-300 text-sm leading-relaxed">${demoData.event.summary}</p>
            <div class="flex flex-wrap gap-2 mt-4">
              ${demoData.event.categories.map(cat => `
                <span class="px-3 py-1 bg-white/10 text-white/80 rounded-full text-xs">${cat}</span>
              `).join('')}
            </div>
          </div>

          <div class="grid grid-cols-3 gap-3 mb-4">
            <div class="bg-blue-50 rounded-xl p-4 text-center">
              <p class="text-2xl font-bold text-blue-600">${demoData.event.stats.sources}</p>
              <p class="text-xs text-blue-600/70">Sources</p>
            </div>
            <div class="bg-green-50 rounded-xl p-4 text-center">
              <p class="text-2xl font-bold text-green-600">${demoData.event.stats.factChecks}</p>
              <p class="text-xs text-green-600/70">Fact-Checks</p>
            </div>
            <div class="bg-violet-50 rounded-xl p-4 text-center">
              <p class="text-2xl font-bold text-violet-600">4</p>
              <p class="text-xs text-violet-600/70">Chapters</p>
            </div>
          </div>

          <h3 class="text-slate-800 font-semibold mb-3">Key Perspectives</h3>
          <div class="space-y-2">
            ${[
              { label: 'Progressive View', color: 'bg-blue-500', text: 'Systemic healthcare failure symptom' },
              { label: 'Centrist View', color: 'bg-slate-500', text: 'Complex issue requiring nuanced analysis' },
              { label: 'Conservative View', color: 'bg-red-500', text: 'Violence never justified, rule of law' }
            ].map(item => `
              <div class="flex items-center gap-3 p-3 bg-slate-50 rounded-xl">
                <div class="w-1 h-10 ${item.color} rounded-full"></div>
                <div>
                  <p class="text-sm font-medium text-slate-700">${item.label}</p>
                  <p class="text-xs text-slate-500">${item.text}</p>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }

    function renderSpectrum() {
      return `
        <div class="px-4 py-4">
          <div class="mb-4">
            <div class="flex justify-between text-xs text-slate-500 mb-2">
              <span>Progressive</span>
              <span>Center</span>
              <span>Conservative</span>
            </div>
            <div class="h-2 rounded-full bg-gradient-to-r from-blue-500 via-slate-400 to-red-500"></div>
          </div>

          <!-- Progressive -->
          <div class="mb-4">
            <h3 class="text-blue-600 font-semibold text-sm mb-2 flex items-center gap-2">
              <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
              Progressive (-7 to -10)
            </h3>
            <div class="space-y-2">
              ${demoData.sources.progressive.map(s => `
                <div class="flex items-center justify-between p-3 bg-blue-50 rounded-xl">
                  <div>
                    <p class="font-medium text-slate-800">${s.name}</p>
                    <p class="text-xs text-slate-500">${s.framing}</p>
                  </div>
                  <div class="text-right">
                    <p class="text-sm font-bold text-blue-600">${s.lean}</p>
                    <p class="text-xs text-slate-400">${s.credibility}% cred</p>
                  </div>
                </div>
              `).join('')}
            </div>
          </div>

          <!-- Centrist -->
          <div class="mb-4">
            <h3 class="text-slate-600 font-semibold text-sm mb-2 flex items-center gap-2">
              <div class="w-3 h-3 bg-slate-500 rounded-full"></div>
              Centrist (-2 to +2)
            </h3>
            <div class="space-y-2">
              ${demoData.sources.centrist.map(s => `
                <div class="flex items-center justify-between p-3 bg-slate-100 rounded-xl">
                  <div>
                    <p class="font-medium text-slate-800">${s.name}</p>
                    <p class="text-xs text-slate-500">${s.framing}</p>
                  </div>
                  <div class="text-right">
                    <p class="text-sm font-bold text-slate-600">${s.lean}</p>
                    <p class="text-xs text-slate-400">${s.credibility}% cred</p>
                  </div>
                </div>
              `).join('')}
            </div>
          </div>

          <!-- Conservative -->
          <div class="mb-4">
            <h3 class="text-red-600 font-semibold text-sm mb-2 flex items-center gap-2">
              <div class="w-3 h-3 bg-red-500 rounded-full"></div>
              Conservative (+7 to +10)
            </h3>
            <div class="space-y-2">
              ${demoData.sources.conservative.map(s => `
                <div class="flex items-center justify-between p-3 bg-red-50 rounded-xl">
                  <div>
                    <p class="font-medium text-slate-800">${s.name}</p>
                    <p class="text-xs text-slate-500">${s.framing}</p>
                  </div>
                  <div class="text-right">
                    <p class="text-sm font-bold text-red-600">+${s.lean}</p>
                    <p class="text-xs text-slate-400">${s.credibility}% cred</p>
                  </div>
                </div>
              `).join('')}
            </div>
          </div>
        </div>
      `;
    }

    function renderTimeline() {
      return `
        <div class="px-4 py-4">
          ${demoData.chapters.map(ch => `
            <div class="mb-4">
              <button onclick="toggleChapter('${ch.id}')" 
                      class="w-full flex items-center justify-between p-4 bg-slate-100 rounded-xl">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 rounded-full flex items-center justify-center ${ch.status === 'ongoing' ? 'bg-amber-100 text-amber-600' : 'bg-green-100 text-green-600'}">
                    ${ch.status === 'ongoing' ? icons.clock : icons.check}
                  </div>
                  <div class="text-left">
                    <p class="font-semibold text-slate-800">${ch.title}</p>
                    <p class="text-xs text-slate-500">${ch.date}</p>
                  </div>
                </div>
                ${expandedChapter === ch.id ? icons.chevronUp : icons.chevronDown}
              </button>
              
              ${expandedChapter === ch.id ? `
                <div class="mt-2 ml-6 border-l-2 border-violet-200 pl-4 space-y-3">
                  ${ch.events.map(ev => `
                    <div class="relative">
                      <div class="absolute -left-6 top-2 w-3 h-3 bg-violet-500 rounded-full border-2 border-white"></div>
                      <div class="bg-white p-3 rounded-xl shadow-sm">
                        <span class="text-xs text-violet-600 font-medium">${ev.time}</span>
                        <p class="font-medium text-slate-800 text-sm">${ev.title}</p>
                        <p class="text-xs text-slate-500 mt-1">${ev.summary}</p>
                      </div>
                    </div>
                  `).join('')}
                </div>
              ` : ''}
            </div>
          `).join('')}
        </div>
      `;
    }

    function renderFactCheck() {
      return `
        <div class="px-4 py-4">
          <div class="mb-4 p-4 bg-slate-100 rounded-xl">
            <div class="flex items-center gap-2 mb-2">
              <span class="text-violet-600">${icons.shield}</span>
              <span class="font-semibold text-slate-800">Verified Claims</span>
            </div>
            <p class="text-sm text-slate-600">${demoData.factChecks.length} claims have been fact-checked by multiple sources</p>
          </div>

          <div class="space-y-3">
            ${demoData.factChecks.map(fc => `
              <div class="bg-white border border-slate-200 rounded-xl overflow-hidden">
                <div class="p-4">
                  <p class="text-sm font-medium text-slate-800 mb-2">"${fc.claim}"</p>
                  <div class="flex items-center gap-2 mb-2">
                    <span class="px-2 py-1 rounded text-xs font-bold text-white" style="background-color: ${fc.color}">
                      ${fc.verdict}
                    </span>
                  </div>
                  <p class="text-xs text-slate-500">${fc.explanation}</p>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }

    function renderBookmark() {
      return `
        <div class="pb-24 animate-fadeIn">
          <div class="px-5 pt-6 pb-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-slate-800">Bookmark</h1>
            <button class="text-blue-600 font-medium">Done</button>
          </div>

          <div class="px-5">
            ${demoData.bookmarkedEvents.map(ev => `
              <div class="flex items-center gap-4 py-4 border-b border-slate-100">
                <div class="flex-1">
                  <h3 class="font-medium text-slate-800 mb-1">${ev.title}</h3>
                  <p class="text-sm text-slate-500">${ev.category}</p>
                </div>
                <div class="w-20 h-16 bg-gradient-to-br from-slate-300 to-slate-400 rounded-lg flex items-center justify-center">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z"/><path d="M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z"/></svg>
                </div>
                <button onclick="toggleBookmark(${ev.id})" class="p-2 hover:bg-slate-100 rounded-full">
                  ${ev.bookmarked ? `<span class="text-slate-700">${icons.bookmarkFilled}</span>` : `<span class="text-slate-400">${icons.bookmark}</span>`}
                </button>
              </div>
            `).join('')}
          </div>
        </div>
        ${renderBottomNav()}
      `;
    }

    function renderProfile() {
      const p = demoData.userProfile;
      return `
        <div class="pb-24 animate-fadeIn">
          <div class="px-5 pt-6 pb-6">
            <div class="flex items-center gap-4 mb-6">
              <div class="w-20 h-20 rounded-full bg-gradient-to-br from-violet-400 to-indigo-500 flex items-center justify-center text-white text-2xl font-bold">
                ${p.name.charAt(0)}
              </div>
              <div>
                <h1 class="text-xl font-bold text-slate-800">${p.name}</h1>
                <div class="flex flex-wrap gap-2 mt-2">
                  ${p.badges.map(b => `
                    <span class="flex items-center gap-1 px-2 py-1 bg-violet-100 text-violet-700 rounded-full text-xs">
                      <span>${b.icon}</span> ${b.name}
                    </span>
                  `).join('')}
                </div>
              </div>
            </div>

            <div class="grid grid-cols-3 gap-4 pb-6 border-b border-slate-200">
              <div class="text-center">
                <p class="text-slate-500 text-xs mb-1"># of Fact-Checks</p>
                <p class="text-2xl font-bold text-slate-800">${p.factChecks}</p>
              </div>
              <div class="text-center">
                <p class="text-slate-500 text-xs mb-1">Diversity Score</p>
                <p class="text-2xl font-bold text-slate-800">${p.diversityScore}/100</p>
              </div>
              <div class="text-center">
                <p class="text-slate-500 text-xs mb-1">Level</p>
                <p class="text-2xl font-bold text-slate-800">${p.level}</p>
              </div>
            </div>
          </div>

          <!-- Political Balance -->
          <div class="px-5 mb-6">
            <h2 class="font-semibold text-slate-800 mb-3">Political Balance</h2>
            <div class="bg-slate-100 rounded-xl p-4">
              <div class="flex justify-between text-sm mb-2">
                <span class="text-blue-600">Progressive ${p.politicalBalance.progressive}%</span>
                <span class="text-red-600">Conservative ${p.politicalBalance.conservative}%</span>
              </div>
              <div class="h-3 bg-slate-200 rounded-full overflow-hidden flex">
                <div class="bg-blue-500 transition-all" style="width: ${p.politicalBalance.progressive}%"></div>
                <div class="bg-red-500 transition-all" style="width: ${p.politicalBalance.conservative}%"></div>
              </div>
              <p class="text-center text-green-600 text-sm mt-2 font-medium">‚úì BALANCED</p>
            </div>
          </div>

          <!-- Menu -->
          <div class="px-5">
            <h2 class="font-semibold text-slate-800 mb-2">My Archive</h2>
            ${['Ongoing Topics', 'Resolved Topics'].map(item => `
              <button class="w-full flex items-center justify-between py-4 border-b border-slate-100 text-left">
                <span class="text-slate-700">${item}</span>
                ${icons.chevronRight}
              </button>
            `).join('')}

            <h2 class="font-semibold text-slate-800 mt-6 mb-2">My Progress</h2>
            ${['Information Diets', 'Weekly Challenges', 'Games & Records'].map(item => `
              <button class="w-full flex items-center justify-between py-4 border-b border-slate-100 text-left">
                <span class="text-slate-700">${item}</span>
                ${icons.chevronRight}
              </button>
            `).join('')}

            <h2 class="font-semibold text-slate-800 mt-6 mb-2">Settings</h2>
            ${['My Account', 'Privacy Settings', 'Contact Us', 'About Us'].map(item => `
              <button class="w-full flex items-center justify-between py-4 border-b border-slate-100 text-left">
                <span class="text-slate-700">${item}</span>
                ${icons.chevronRight}
              </button>
            `).join('')}
          </div>
        </div>
        ${renderBottomNav()}
      `;
    }

    function renderExplore() {
      return `
        <div class="pb-24 animate-fadeIn">
          <div class="px-5 pt-6 pb-4">
            <h1 class="text-2xl font-bold text-slate-800 mb-4">Explore</h1>
            <div class="flex gap-2 overflow-x-auto pb-2 hide-scrollbar">
              ${['All', 'Politics', 'Technology', 'Healthcare', 'Economy'].map((cat, i) => `
                <button class="px-4 py-2 rounded-full text-sm whitespace-nowrap transition-all ${i === 0 ? 'bg-violet-600 text-white' : 'bg-slate-100 text-slate-600'}">
                  ${cat}
                </button>
              `).join('')}
            </div>
          </div>

          <div class="px-5 space-y-4">
            <div onclick="showEventDetail()" class="bg-white border border-slate-200 rounded-2xl overflow-hidden cursor-pointer hover:shadow-lg transition-all">
              <div class="h-40 bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center">
                ${icons.trending}
              </div>
              <div class="p-4">
                <span class="inline-block px-2 py-1 bg-violet-100 text-violet-700 rounded text-xs mb-2">Healthcare</span>
                <h3 class="font-semibold text-slate-800 mb-1">UnitedHealthcare CEO Shooting</h3>
                <p class="text-sm text-slate-500">47 sources aggregated</p>
              </div>
            </div>
            <div class="bg-white border border-slate-200 rounded-2xl overflow-hidden cursor-pointer hover:shadow-lg transition-all">
              <div class="h-40 bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center">
                ${icons.trending}
              </div>
              <div class="p-4">
                <span class="inline-block px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs mb-2">Technology</span>
                <h3 class="font-semibold text-slate-800 mb-1">AI Regulation Debate</h3>
                <p class="text-sm text-slate-500">32 sources aggregated</p>
              </div>
            </div>
          </div>
        </div>
        ${renderBottomNav()}
      `;
    }

    // Event Handlers
    function switchTab(tab) {
      activeTab = tab;
      currentScreen = tab;
      render();
    }

    function showEventDetail() {
      currentScreen = 'eventDetail';
      eventDetailView = 'overview';
      render();
    }

    function goBack() {
      currentScreen = activeTab;
      render();
    }

    function setEventView(view) {
      eventDetailView = view;
      render();
    }

    function toggleChapter(chapterId) {
      expandedChapter = expandedChapter === chapterId ? null : chapterId;
      render();
    }

    function toggleBookmark(id) {
      const event = demoData.bookmarkedEvents.find(e => e.id === id);
      if (event) event.bookmarked = !event.bookmarked;
      render();
    }

    // Main Render
    function render() {
      const app = document.getElementById('app');
      
      if (currentScreen === 'splash') {
        app.innerHTML = renderSplash();
      } else if (currentScreen === 'eventDetail') {
        app.innerHTML = renderEventDetail();
      } else if (currentScreen === 'home') {
        app.innerHTML = renderHome();
      } else if (currentScreen === 'explore') {
        app.innerHTML = renderExplore();
      } else if (currentScreen === 'bookmark') {
        app.innerHTML = renderBookmark();
      } else if (currentScreen === 'profile') {
        app.innerHTML = renderProfile();
      }
    }

    // Initialize
    render();
    
    // Auto transition from splash
    setTimeout(() => {
      currentScreen = 'home';
      activeTab = 'home';
      render();
    }, 2500);
  </script>
</body>
</html>
